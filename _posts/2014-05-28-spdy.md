---
layout: post
title: SPDY
---

At Scribe, we are constantly working to better the experience of our clients. Since our WFDW clients and internal staff rely heavily on our web applications, we strive to improve the effectiveness of these services. Since the release of our newest platform, we migrated from [Apache](http://en.wikipedia.org/wiki/Apache_HTTP_Server) to [Nginx](http://en.wikipedia.org/wiki/Nginx). 

This transition allowed for increased web-server performance with less memory and processor overhead. We also found the configuration of Nginx both powerful and easily understandable. During this migration our new web applications were deployed in an SSL-only environment for the protection of our client data. But like any complicated web application, the many individual [HTTP](http://en.wikipedia.org/wiki/HTTP) connections required for a single page were beginning to result in a performance penalty.

Recently I received a call from our President, David Alan Rech, asking about possible performance difficulties. While the problem was ultimately a local internet issue, the notion of improving our performance, given the requirements of our web applications, resulted in some additional research. 

### A Speedy Web

[SPDY](http://en.wikipedia.org/wiki/SPDY) (pronounced *speedy*) is a network protocol developed primarily by Google. It's intention is to improve load latency and security. For Scribe's needs, the most important aspects of this protocol are compression, multiplexing, and prioritization. 

In a regular HTTP request, when a user client (such as Firefox or Chrome) requests a web page (such as [scribenet.com](https://scribenet.com/)), an HTTP request is initiated with the server. As the user client reads the page HTML, it creates new HTTP requests for each resource on the page--every image, style-sheet, and javascript resource. This leads to upwards of ten or fifteen HTTP requests for each individual page. 

It is important to realize that each additional HTTP request increases the overhead of a page load. The more assets a page has, the higher the perceived latency. SPDY works to mitigate these costs by effectively acting as a tunnel for HTTP traffic and modifying the way HTTP requests and responses are sent. This includes prioritizing and multiplexing the transfer of resources so only one connection per client is required.

### Enable with Nginx

To enable SPDY within Nginx, you will need to have a version `> 1.5.1` with the `spdy` module enabled. On Ubuntu, I highly recommend using the official [Nginx Launchpad PPA](https://launchpad.net/~nginx/+archive/stable). At this time, the stable channel offers version 1.6 of Nginx on Ubuntu 12.04.1 LTS.

```
sudo add-apt-repository ppa:nginx/stable
sudo apt-get update
sudo apt-get install nginx
```

Once you have configured Nginx for your particular setup, enabling SPDY support is easy. Within the `server` block of your configuration, change the line:

```
listen 443 ssl;
```

to:

```
listen 443 ssl spdy;
```

and reload your configuration:

```
sudo service nginx reload
```

### Testing

Using Chrome/Chromium, first navigate to your website (if you haven't setup Nginx yet, for the purpose of this tutorial, feel free to use [scribenet.com](https://scribenet.com/)). Then open a new tab and enter the following URL:

```
chrome://net-internals/#spdy
```

Within the list of *SPDY sessions* you will see the your website host listed. In our internal testing, page load improved upwards of 30%. 